sudo: required
env:
  global:
  - DOCKER_VOLUMES_DIR=$HOME/docker-volumes
  - DOCKER_CACHE_DIR=$HOME/docker-cache
  - RUNNER_CACHE_DIR=$TRAVIS_BUILD_DIR/runner/.cachedir
  - secure: GZ0fR/7Lc4OZ8fwqARZWSU0nO7hyzVS12k+tTGSY5i7YBDFRpUx/o7DE8A2jfi32vjJforpb3ZR0d5F+mQbussA9zXWALCjTh1/5dIrL2J/upTv3ecBrG9S7s2sSHFNBBP3kfGWEX3kccBd8fu9Lv7ZQhlF8lQx1DBbbDFCZHkxCN9E7mv0o3Ex+jsnHn1IFfxR4ewEQ7NixVugSHS0nJXMwrLnO36CCaMEqChQnxQaXu0xkZE8e9caZs02gJ2dJMvL40xoPZ5FRQfUncoYd+xbd1gl+jLIhSQappVY1bhCdCT9xpt1cvrhWEk0jGAf/fxeTxU9Yk2gAKq9kOWrXOKz0E1jmMS7x/A17zk6y1aphJDZkDKhOKKcze8zaFc2cpX3cjfdjoIpX+K61rHhqilbBfPjnWPHjvZGHiCVqy73zmi0Zy/05POE0/OY+nUpA3BINNEH6mZwvxr5fL34HKdJET0WjhTpBb1gGZYm87whxs3e/EABv7g3PlAg4TwgZLT1v2adNBC/HQBEPCEzsGdKh33kzqVD94K5l3LrFd6v9Aq8J3dx+0WxJ+at0ZFNFRm2iqb33Y/rJwVIOUZ5k5GjlpQqp+kZeGY7PNFNsKDzzgEQAKujHQemMZ3gXKG2/dJNzgvTeStadI/S0W52zlpKdubThCxRu1ywEYyUgpCs=
  - secure: qtSRnvfxi4PfwZg43cYGgSZgVo6o2u2FBEnL+Gn9TTYeXOlk/cmXnC1mavMJkxXuhmIlUz0Y5Az/FS4wk2kN7/aL/vpgk563fgdJwkbGD/14hSlbB4i1YODZqt0TfmS0sM61WteDtQm53RrNeQMHDq6lXE9L8kESHFTasxeBFufO1HtbDNCeY+nfvyiKBWOYEu346mTbsQGCHISy7aJGCtC3D2XgYKvY7J8skE7kPCW6tuu4WSMsrmv/Zs93hCiu0USTUgvqsgzcwDwFqO3AVuQ+4nmCcNS5rkSduND7Yo58wt+KqAbrb8UVLGFMUhumJ0SKup8izHwzDtxZcTADaSG5JHdeSWu/rhMrQgBr0bqK1CZF8HKqJ/OoHzOnAJRFGot73Qxg6WDYDTZaVJ4x7L1XnEZD507cSWj+jkJHW1Sh0Z/bpFLCnhyu3m6IMtYE55th28BjwjUv9JA0va69Nfj1sfyb1bULKMdNalZPQYcj/1SykhkA6rY8uFcaXyGBPDLW90I4E/0PZZbkYqMfyB8VjsXesJAd5ydsnLibdTF8FSZhILlWZaPMCtpDBblDQFGlrTsudlumzRPf1UoIdfM0nKFb5SgcmfqfaWuaiCUfKVLckKYmhBElpDDq9NAQL8TiQGM1IbbERk7tjhY/mPA9It889v6j3mhKMadJSjU=
  - secure: eNzSMTr7udikJnxZZ7U8+1n5gyloLTXuhK6En0yaPYNYZXzLEvGTnW5LWi386LJZw1hbDbTRJcmC2Qv5hFBIq08nrZUFQ7jQqc6erssWTsbVEYVXbd0nZh0lf2ZqCTDfcPMVQtruRM0lZtZ+be6mr0iegr3Qx9DRqGYjZF3ApimpZx/B291c+BMnNF7M8OGyvpsvFvM/BSPHgtBv36a8K2KlvxWc+QvSuBLkM3Fy+npA+27oSH0DoPadfZJZlP2oTce0iwkP2JAsaGyOc4Xpz39cL3ppI4z+cdmvLYTmnDzyox/HKUyQtt/T0V+7EkSgmkoHWsNE9XypUPh7yzHCnRU37YnLJgw8EfUlZ47QweA40w8Ut/pFlPf9DkwejYt987VtjuQd+A+vaIUwyfPmqhb1SvKJPbfkoMcVxGZVePm4e6FAMLczTreYFzAu3nDnffcs5Z14vjnWy4sA1Ln48Xt+BQ22hBMIup666WXZS0xwAEVxs6TnO0hC1QeYWpkS0oeiWV3mlns0AdMAbcpw1nck4qGfJpRFHLg2Lnp/0HzEiGhbIvuafPCZFirvLzALq1lNFW9kAZ0hBJqgbdK3OGUJK8C7QCe/cM4TZ1MrTliB8Nj201jx2tlPCSavZBGOLCub+zn53kz1GofHQ4TVCGOm8KcpHibO/SEcqRIhTdU=
  - secure: PS2jsY2ZaYmf+z6ES3uty0T8/uqnNe0t+mHiClMgiyVA6Lu3Al8cLOs5aGARAtvXAsSA6MV5gRjKJLEDxX4O8CljXGw57IDsWcE8zxRzEmmgdhuImhThCDnqMm/WrDuVIGo9sTg/X6nAXHmD/ssl22nUCPEkWsIhj6MeiaCZeG1bs7yB7FDTD9We26i0OyGjctQhv6Z8BywFc8yLyMz0WggU4FNc/aoQVkQ/DWMIQtawOuAz7m2V0nNtvTEeU3Kd5OjkVcNHqodQTpebysa0e+xlL6hsg44pAErhTM5tFoy/PHvVl9lzoCZjpOsw1/EmPJglPWUO8fR2rnA2IVFxInL7xYEeY+x9uBj4GKVC/ELb1yype+2KaEevHezz6wWmphU4p5FdrpNOhfQcPVXrvI9rL87O8DQxXZdQrrH5gYC4cxME9KaHG3bdLENcDEKnvTACQ/3NKcBcdhS1gH2RhKcn0+ftJvJl8bWZImQ0Uq83/Riv2yi1HCoT2sqz4KEnk0l47Iv9bC8X3EaQDDk6mp0Va2XCUyGX1TgFfM98QsDpQ++6s1q9tIHjfbN+kB1usMijWnimStxXs/q/Mcc3aaMRkr4e3OdenxlA3cmoQ3aD5W0osLkVyWRaSqLGJATHPJcp2KyFP7MHCE0gHtds63YQtmQz741Kna6rUKCGAXk=
  - secure: r+mK+IfULZyUhQy9XsZa3frgwEQmXJ7YdO5x0+CWVl24Y/2RAQNLZnWlI3v7zzFVF392B2kefAumnmky+/iazWHHncD9hgvL9UBT3dAowA9Zqxi8SSgofcbKHPAWz1am5BeTZiNhShqLdzCAYyUk2wpHVcfattAEl+40gcF5M+uafkKYZViU/9LshLGU7Jb7kNGo7z2CYZkLHulYImqjc/z+RkdW6Wb8ygO2uTNHcBCn0kpNYAeVPHeOkY5AtQVQNQYWcGfkMWBbszsY82bFOfhv/SAJdHgSJ8k1i6nRlVyTk0aPSflnLbLJwHEuq8v6zzoSKcrrTNveITolvXUX9LazvY1sxJRvtgY+Kvm5mbtxlnuMlj2j7yTQqG7pT9UXWvOEqIqMSQpZfClsQ2N5NvjHDAjjf1buLSBvrkHqcT0OeUvri+OnQ4fHmB/qzaaPDHYgHfSpLGYgcZk+5+n3rGHAKTz4z8CxH0reJ64xD8OcmlzIn5eAUIeuOqPxYkXWZej0oJip58PN5sTasG4jwcMrLO9WK6g/Ch8ZmIdgulbAoLV6XCbgtdNDEBX3ZCujXKAhyKWEfxHErmV3x/L8OzrfGhm0sEwhcros8u7xCEcSpBArN3lNsu00kJU3GCcdhmXlc03xLwP4tm9fgUhVtq2A/fCck1Ir+m8zoq65sDE=
  - secure: aKa9SvXkI+/wdn6fPHSGWP51DZG/DSjMZPdCfXLkXZcHOaKciBnVFwRzi2AAe4jGQykNEMdqXrpzb1owBJ7CfDEgZ2WAHElnBpjHlDlqirz0gw43lr2uXfiQKC+rKdMcciZ/J1ih3JMChi+9Q+FxIGN4Pwwi1oktvXUwwlFixdhgCWVNNSyJYnl8E0cS4rwQpVGkOVuKHIOnJwLBcwEZUhjNh0oYsursSVYyjQO+a0qPOBpCvcQtx64q1SBFJxvMeSvEPU9pFGU4wPKU797lg2ebSrO+y+c7gR0soS89N3ddOMRRXHBdO8jzDwREk7ZH+ZgmWB7RPiIMH5mdLRM4Ei2ReW7bNDJNYCald03Cjlxj9dnqzMZUZMaPOFzTXK3wL/dlKLth439j6X5v5Uv0tORQCyNTcI6lrR7meaHwR+8WKF4tazulX3V92r8sZSexwSy5Ad56YrzFGOSEtq/4aIEJSxTb8TcPA7S9Z98u8dulazxSbinp2BmcPT0LEMGbrQ4hmDDVd4qxIi4EUZNdLaEJHAl4feqcRw6R3WANt1Gl6m7gAOcZO4e1s8w0IqqDsf/zeF9wTABddqNsEj+xZcsgEngjzRRqDUnonx5Zx1zQTnt7mEZildtmfbPGukQtqhhhmzoitEvhKC6uKdjZv45tdhtCcBgeiLNaITUFVT0=
  - secure: tmsShB+Yx1TkIzy+lUzzp12q5DTG0EUp6yeyvMiQp1lVKqb6D8cO7Z4JGATXqO5g2v6A6UK5bdkbgW8Z8SPpvYJhTRmQJ5eyB/KJEFAICaRp5Tsvx3Ow6MgAiUEs+em2cIGQC0AxMRZvqnTSuEimcWnmKi6KeR8pCY0jl82Gzo9PJOdduSQzHdkVn77aA2iKUE2I9PZiB1J3Xoj0DG+uaPi5xiL6BmxeiCj0869FOpZBKt6Z3GnT8pt5r3LlyLBxLsmMtawrWeRheAFJEzPMFGF5vqw+XuWK8uBbPbRQsi6l874NB/2bGEAXufqyg8jwqAr7mMtHyb1uzgpx1R/0RvkvkLkss9jOmPPmxPjhnPWGFmVjKhB1m7IU7IuwxkxaNyiKxNXw/wAH0/4SXdxlVHCTmeqbpWd1IWC98PmOdk8ajHIiF5txuWWzawAY4yiSP8gw8wYcGmRIBexxWAWCJY9Nv7PLLysXkqzl1BWRJQWMHyrQbkzb67tOpK1qQycnTeuBVdYizN4O8x98XefXd0HBY93gdKG3Vw9Fe9Z/B1W4L+Gs2sI/HlQ/hznbJTSqw9crgnR0SsryyC2ulhIxn8rv21cZzVvDLP/mjnZpm8Bzk6PafJBAHRa1wSRY6WhaNG1hZrkwnhojf4p6msHMOfn6bfQmKPS2m3G8c6kJKHo=
  - secure: m0+8uzi7KPM8UPN24FUJ7FFVrOcWVXFxqblwaaLUqoHH3RtX3K/eOOxppCe6Lni+66415CAkAslGNVOus4XJ9isMnybdo/tsKabVi1wgp5kaeVkOc++nXdVwTtyXB9+ENH1NP5H2GyO5aqSTyYzkDSK0rEpgxhyzx2uEMPGr4HmMn7misg4kEggYCaSymCkK7ZYXaE8I/49rwipuJAHTHawNA/TpzJVOCdyS9LmbIGzjKIkAOkSyBm6ECdJD8GGok225VPTtG0mTAk+bgrF1T+0xpGmd+lZxLYmOHEJXvCuq6he5kjfVN/1GJhTORIo5R+lAtDBUcU53LfEZOVw2Sr3HPbxTR5p2HZybCnTKqrR9zy/50rHQaLJddZx+HRYqwf4dJh76nRF4+UstyyChXBDKzHjc0jmMVJaSRQY8xv4qZPw326YR86/Vtxahyp3CSJRpZfTRXgIVtfFk0BZaF2qoyFAQWOCDOUtb3S1VaHuLFSSGEJUfBvFC5VRTQhr+goCKkAiVpqO7YzU7TO5MMxUYMPHMU4wF+2MLTkUaOfZ0dO0YmGEhTQOatDPXoMfhZND3CXHX+Y0MmHq7/jWxWB9hrRoH1Wcd+/kO6WESkKsVyJZPLIEBYIiqxxEct3Ca1jz2sbXzj7nr3Rt8jBpVL/OMMrX7QYCCnjr6CYMVwBY=
  - secure: PbyMDjV/VrsRekt/ny+OSsgpR5xb+xQVDN9LrBBDo2dt9N2n1BynYA224YDaemXr8jl45N3QfKfADFuDjmjozDXyCdgCcYZ8ZfmGLpv4+6iencBGAj29CVrIDTxnYDWKUmJfeMmctjyWry5l6PCt811PxmYEfk/iT8QKW+4eGDvTsu2XTnoab0Wx1JSv7TMhhkcbGoI7nh1OXRBxd9I8E8XLfhgHwt0u6cuHc0DmJ5JvHhzBIkFdzlmocAVUdERnbaZy2q0AFtTk3yRBZyo853ZZI33aG9gzi4DvY5s6gkZf8xKcpQeh36LRH1AxlazDV+Y32rxjzewsa0PpSmqTny/XqmZRsOjDtRKNh0LNFv/p8jNzSTA+5TgNAzFsRQJJKSmhpR6s1NFcUb7ewteZpobz3Do044KuW5r34HWkr3VoH4IkjFYzJndyxMPiGV4rzxJbN18kPaQgiC98NF67J5E9BgM8E5GE2B5pJ4mcUSuyjQhQNMxXfBvylIgwy+Zv9xM0dcue/KXGFlw7+ceFREM1hs5b6WE86iodBXjCYQMDaAGRmR9q7Amg2ywWZwtiGGhlJhgORWyES8ypz5evRg/P9K12rwywIFX1kQeBjsHOanPEyj2CEH2IaWruzJFaQR0wxmD3vrWf9rVWrGr9l+Z9NoXL5fMEcEvJnrUM60Q=
cache:
  apt: true
  directories:
  - "$DOCKER_CACHE_DIR"
  - "$DOCKER_VOLUMES_DIR"
  - "$RUNNER_CACHE_DIR"
branches:
  only:
  - jobs
services:
- docker
before_cache:
- "./scripts/docker-save.sh"
before_install:
- sudo apt-get update
- sudo apt-get -y -o Dpkg::Options::="--force-confnew" install docker-ce
- git remote add x https://github.com/cljs-oss/canary.git && git fetch x master &&
  git checkout x/master
- "./scripts/docker-load.sh"
script:
- "./scripts/travis-entrypoint.sh"
